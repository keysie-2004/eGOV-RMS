<!-- partials/modal.ejs -->
<!-- Error Modal -->
<div id="errorModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4">
  <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
    <div class="mt-3 text-center">
      <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100">
        <i class="fas fa-exclamation-circle text-red-600 text-xl"></i>
      </div>
      <h3 class="text-lg leading-6 font-medium text-gray-900 mt-2">Error</h3>
      <div class="mt-2 px-4 py-3">
        <p id="errorMessage" class="text-sm text-gray-500"></p>
      </div>
      <div class="items-center px-4 py-3">
        <button onclick="closeErrorModal()" class="px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300 transition-colors duration-200">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div id="successModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4">
  <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
    <div class="mt-3 text-center">
      <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
        <i class="fas fa-check-circle text-green-600 text-xl"></i>
      </div>
      <h3 class="text-lg leading-6 font-medium text-gray-900 mt-2">Success</h3>
      <div class="mt-2 px-4 py-3">
        <p id="successMessage" class="text-sm text-gray-500"></p>
      </div>
      <div class="items-center px-4 py-3">
        <button onclick="closeSuccessModal()" class="px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300 transition-colors duration-200">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  // Modal control functions
  function showErrorModal(message) {
    document.getElementById('errorMessage').textContent = message;
    document.getElementById('errorModal').classList.remove('hidden');
    // Automatically close after 2 seconds
    setTimeout(() => {
      closeErrorModal();
    }, 500);
  }

  function closeErrorModal() {
    document.getElementById('errorModal').classList.add('hidden');
  }

  function showSuccessModal(message) {
    document.getElementById('successMessage').textContent = message;
    document.getElementById('successModal').classList.remove('hidden');
    // Automatically close after 2 seconds
    setTimeout(() => {
      closeSuccessModal();
    }, 500);
  }

  function closeSuccessModal() {
    document.getElementById('successModal').classList.add('hidden');
  }

  // Check for URL parameters to show modals on page load
  document.addEventListener('DOMContentLoaded', function () {
    const urlParams = new URLSearchParams(window.location.search);
    const error = urlParams.get('error');
    const success = urlParams.get('success');

    if (error) {
      showErrorModal(decodeURIComponent(error));
      // Clean up URL
      const cleanUrl = window.location.pathname;
      window.history.replaceState({}, document.title, cleanUrl);
    }

    if (success) {
      showSuccessModal(decodeURIComponent(success));
      // Clean up URL
      const cleanUrl = window.location.pathname;
      window.history.replaceState({}, document.title, cleanUrl);
    }
  });
</script>